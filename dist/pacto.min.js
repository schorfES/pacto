!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.pacto=t():e.pacto=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=new WeakMap;t.EventEmitter=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o.set(this,{})}return r(e,[{key:"on",value:function(e,t){var n=o.get(this);return n[e]=n[e]||[],n[e].push(t),this}},{key:"off",value:function(e,t){var n=o.get(this);return n[e]?(n[e]=t?n[e].filter(function(e){return e!==t}):[],this):this}},{key:"trigger",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=o.get(this);return r[e]&&r[e].forEach(function(r){return r.call(null,{sender:t,type:e,data:n})}),this}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);var u=new WeakMap;t.Model=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e=r({},n.defaults,e);var o=new Proxy(e,{set:function(e,t,r){var o=e[t]!==r;return e[t]=r,o&&n.trigger("change",{prop:t,value:r}),!0}});return u.set(n,o),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.EventEmitter),o(t,[{key:"defaults",get:function(){return null}},{key:"props",get:function(){return u.get(this)}}]),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var r=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(r):void 0},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=new WeakMap,l=function(){function e(t){a(this,e);var n={context:t,register:{}};f.set(this,n)}return o(e,[{key:"add",value:function(e,t){return f.get(this).register[e]=t,this}},{key:"remove",value:function(e){var t=f.get(this).register;return t[e]=void 0,delete t[e],this}},{key:"get",value:function(e){return f.get(this).register[e]}},{key:"has",value:function(e){return!!this.get(e)}}]),e}(),s=function(e){function t(e){a(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=f.get(n),o=r.register;return r.onAction=function(t){var n=t.type,r=o[n];r&&r.forEach(function(n){var r=new n;r.context=e,r.event=t,r.run()})},n}return c(t,l),o(t,[{key:"add",value:function(e,n){var o=f.get(this),i=o.context,u=o.onAction,c=this.get(e);return c||i.on(e,u),n=(c||[]).concat(n),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,n)}},{key:"remove",value:function(e,n){var o=this.get(e);if(o&&o.length){if(!n)return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this,e);if(n instanceof Array||(n=[n]),n.forEach(function(e){var t=o.indexOf(e);t>-1&&o.splice(t,1)}),0===o.length)return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this,e)}return this}}]),t}();t.Context=function(e){function t(){a(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return f.set(e,{actions:new s(e),values:new l(e)}),e}return c(t,i.EventEmitter),o(t,[{key:"actions",get:function(){return f.get(this).actions}},{key:"values",get:function(){return f.get(this).values}}]),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Collection=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=n(1);var u=new WeakMap;t.Collection=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=function(e){return e instanceof i.Model?e:new n.Model(e)},o={get:function(e,t){var o=e[t];return"function"==typeof o?function(){for(var i=arguments.length,u=Array(i),c=0;c<i;c++)u[c]=arguments[c];var a,f=!1;switch(t){case"pop":case"reverse":case"shift":case"sort":f=!0;break;case"fill":f=!0,u[0]=r(u[0]);break;case"push":case"unshift":f=!0,u=u.map(r);break;case"splice":f=!0,u=u.map(function(e,t){return t>1?r(e):e})}return a=o.apply(e,u),f&&n.trigger("change",{method:t}),a}:o}},c=new Proxy(e.map(r),o);return u.set(n,c),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.EventEmitter),r(t,[{key:"Model",get:function(){return i.Model}},{key:"models",get:function(){return u.get(this)}}]),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.EventEmitter=t.Context=t.Collection=void 0;var r=n(3),o=n(2),i=n(0),u=n(1);t.Collection=r.Collection,t.Context=o.Context,t.EventEmitter=i.EventEmitter,t.Model=u.Model}])});